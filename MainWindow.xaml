<Window x:Class="VectorEditor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Vector Editor"
        Width="1100"
        Height="700"
        WindowStartupLocation="CenterScreen"
        Background="#0B1020">

    <Grid Background="#0B1020">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- الشريط الجانبي -->
        <Border Grid.Column="0"
                Background="#0F172A"
                Padding="12">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Orientation="Vertical" Margin="4">

                    <!-- الأدوات -->
                    <TextBlock Text="Tools"
                               Foreground="White"
                               FontSize="18"
                               FontWeight="Bold"
                               Margin="0,0,0,8"/>

                    <WrapPanel Margin="0,0,0,6">
                        <Button x:Name="BtnSelect"
                                Content="Select"
                                Width="70"
                                Margin="2"
                                Click="BtnSelect_Click"/>
                        <Button x:Name="BtnRect"
                                Content="rectangul"
                                Width="70"
                                Margin="2"
                                Click="BtnRect_Click"/>
                        <Button x:Name="BtnEllipse"
                                Content="oval"
                                Width="70"
                                Margin="2"
                                Click="BtnEllipse_Click"/>
                    </WrapPanel>

                    <WrapPanel Margin="0,0,0,10">
                        <Button x:Name="BtnLine"
                                Content="Line"
                                Width="70"
                                Margin="2"
                                Click="BtnLine_Click"/>
                        <Button x:Name="BtnPolygon"
                                Content="polygon"
                                Width="110"
                                Margin="2"
                                Click="BtnPolygon_Click"/>
                    </WrapPanel>

                    <Separator Margin="0,8,0,8"/>

                    <!-- خصائص الشكل -->
                    <TextBlock Text="Specific shape properties"
                               Foreground="White"
                               FontSize="16"
                               FontWeight="Bold"
                               Margin="0,0,0,8"/>

                    <!-- X -->
                    <Grid Margin="0,0,0,4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Text="X:"
                                   Grid.Column="0"
                                   Foreground="White"
                                   VerticalAlignment="Center"/>

                        <TextBox x:Name="XBox"
                                 Grid.Column="1"
                                 Margin="4,0,0,0"
                                 HorizontalAlignment="Stretch"
                                 PreviewKeyDown="PropBox_PreviewKeyDown"
                                 GotFocus="PropBox_GotFocus"
                                 LostFocus="PropBox_LostFocus"/>
                    </Grid>

                    <!-- Y -->
                    <Grid Margin="0,0,0,4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Text="Y:"
                                   Grid.Column="0"
                                   Foreground="White"
                                   VerticalAlignment="Center"/>

                        <TextBox x:Name="YBox"
                                 Grid.Column="1"
                                 Margin="4,0,0,0"
                                 HorizontalAlignment="Stretch"
                                 PreviewKeyDown="PropBox_PreviewKeyDown"
                                 GotFocus="PropBox_GotFocus"
                                 LostFocus="PropBox_LostFocus"/>
                    </Grid>

                    <!-- Width -->
                    <Grid Margin="0,0,0,4">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Text="Width:"
                                   Grid.Column="0"
                                   Foreground="White"
                                   VerticalAlignment="Center"/>

                        <TextBox x:Name="WidthBox"
                                 Grid.Column="1"
                                 Margin="4,0,0,0"
                                 HorizontalAlignment="Stretch"
                                 PreviewKeyDown="PropBox_PreviewKeyDown"
                                 GotFocus="PropBox_GotFocus"
                                 LostFocus="PropBox_LostFocus"/>
                    </Grid>

                    <!-- Height -->
                    <Grid Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Text="Height:"
                                   Grid.Column="0"
                                   Foreground="White"
                                   VerticalAlignment="Center"/>

                        <TextBox x:Name="HeightBox"
                                 Grid.Column="1"
                                 Margin="4,0,0,0"
                                 HorizontalAlignment="Stretch"
                                 PreviewKeyDown="PropBox_PreviewKeyDown"
                                 GotFocus="PropBox_GotFocus"
                                 LostFocus="PropBox_LostFocus"/>
                    </Grid>

                    <!-- الألوان -->
                    <TextBlock Text="Colors"
           Foreground="White"
           FontSize="16"
           FontWeight="Bold"
           Margin="0,0,0,6"/>

                    <!-- Fill -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                        <TextBlock Text="Fill:"
               Width="70"
               Foreground="White"
               VerticalAlignment="Center"/>

                        <!-- خانة الهيكس بعرض ثابت -->
                        <TextBox x:Name="FillColorBox"
             Width="120"
             Margin="4,0"
             Text="#FFADD8E6"
             PreviewKeyDown="PropBox_PreviewKeyDown"
             GotFocus="PropBox_GotFocus"
             LostFocus="PropBox_LostFocus"/>

                        <!-- زر منيو الألوان للـ Fill -->
                        <Button Width="24"
            Height="22"
            Margin="4,0,0,0"
            Content="▼"
            Click="FillColorMenuButton_Click">
                            <Button.ContextMenu>
                                <ContextMenu>

                                    <!-- 15 لون، كل واحد له Tag هو الهيكس -->
                                    <MenuItem Header="Black" Tag="#FF000000" Click="FillColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Black"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="White" Tag="#FFFFFFFF" Click="FillColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="White"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Red" Tag="#FFFF0000" Click="FillColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Red"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Green" Tag="#FF008000" Click="FillColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Green"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Blue" Tag="#FF0000FF" Click="FillColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Blue"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Yellow" Tag="#FFFFFF00" Click="FillColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Yellow"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Orange" Tag="#FFFFA500" Click="FillColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Orange"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Purple" Tag="#FF800080" Click="FillColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Purple"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Cyan" Tag="#FF00FFFF" Click="FillColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Cyan"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Magenta" Tag="#FFFF00FF" Click="FillColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Magenta"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Gray" Tag="#FF808080" Click="FillColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Gray"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Brown" Tag="#FFA52A2A" Click="FillColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Brown"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Pink" Tag="#FFFFC0CB" Click="FillColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Pink"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="LightBlue" Tag="#FFADD8E6" Click="FillColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="LightBlue"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Transparent" Tag="#00FFFFFF" Click="FillColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Transparent" Stroke="Gray"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                </ContextMenu>
                            </Button.ContextMenu>
                        </Button>
                    </StackPanel>

                    <!-- Stroke -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Stroke:"
               Width="70"
               Foreground="White"
               VerticalAlignment="Center"/>

                        <!-- خانة الهيكس بعرض ثابت -->
                        <TextBox x:Name="StrokeColorBox"
             Width="120"
             Margin="4,0"
             Text="#FF000000"
             PreviewKeyDown="PropBox_PreviewKeyDown"
             GotFocus="PropBox_GotFocus"
             LostFocus="PropBox_LostFocus"/>

                        <!-- زر منيو الألوان للـ Stroke -->
                        <Button Width="24"
            Height="22"
            Margin="4,0,0,0"
            Content="▼"
            Click="StrokeColorMenuButton_Click">
                            <Button.ContextMenu>
                                <ContextMenu>

                                    <!-- نفس الـ 15 لون -->
                                    <MenuItem Header="Black" Tag="#FF000000" Click="StrokeColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Black"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="White" Tag="#FFFFFFFF" Click="StrokeColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="White"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Red" Tag="#FFFF0000" Click="StrokeColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Red"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Green" Tag="#FF008000" Click="StrokeColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Green"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Blue" Tag="#FF0000FF" Click="StrokeColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Blue"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Yellow" Tag="#FFFFFF00" Click="StrokeColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Yellow"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Orange" Tag="#FFFFA500" Click="StrokeColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Orange"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Purple" Tag="#FF800080" Click="StrokeColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Purple"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Cyan" Tag="#FF00FFFF" Click="StrokeColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Cyan"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Magenta" Tag="#FFFF00FF" Click="StrokeColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Magenta"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Gray" Tag="#FF808080" Click="StrokeColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Gray"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Brown" Tag="#FFA52A2A" Click="StrokeColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Brown"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Pink" Tag="#FFFFC0CB" Click="StrokeColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Pink"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="LightBlue" Tag="#FFADD8E6" Click="StrokeColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="LightBlue"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                    <MenuItem Header="Transparent" Tag="#00FFFFFF" Click="StrokeColorMenuItem_Click">
                                        <MenuItem.Icon>
                                            <Rectangle Width="14" Height="14" Fill="Transparent" Stroke="Gray"/>
                                        </MenuItem.Icon>
                                    </MenuItem>

                                </ContextMenu>
                            </Button.ContextMenu>
                        </Button>
                    </StackPanel>


                    <!-- التحكم -->
                    <TextBlock Text="Control"
                               Foreground="White"
                               FontSize="16"
                               FontWeight="Bold"
                               Margin="0,0,0,8"/>

                    <!-- أزرار الزوم -->
                    <WrapPanel Margin="0,0,0,6">
                        <Button x:Name="BtnZoomIn"
                                Content="ZoomIn"
                                Width="70"
                                Margin="2"
                                Click="BtnZoomIn_Click"/>
                        <Button x:Name="BtnZoomOut"
                                Content="ZoomOut"
                                Width="70"
                                Margin="2"
                                Click="BtnZoomOut_Click"/>
                    </WrapPanel>

                    <!-- مربع الزوم اليدوي -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Zoom:"
                                   Width="50"
                                   Foreground="White"
                                   VerticalAlignment="Center"/>
                        <TextBox x:Name="ZoomBox"
                                 Width="60"
                                 Margin="4,0"
                                 Text="100"
                                 PreviewKeyDown="ZoomBox_PreviewKeyDown"
                                 LostFocus="ZoomBox_LostFocus"
                                 GotFocus="ZoomBox_GotFocus"/>
                        <TextBlock Text="%"
                                   Foreground="White"
                                   VerticalAlignment="Center"
                                   Margin="4,0,0,0"/>
                    </StackPanel>

                    <WrapPanel Margin="0,0,0,6">
                        <Button x:Name="BtnDelete"
                                Content="Delete"
                                Width="70"
                                Margin="2"
                                Click="BtnDelete_Click"/>
                        <Button x:Name="BtnUndo"
                                Content="Undo"
                                Width="70"
                                Margin="2"
                                Click="BtnUndo_Click"/>
                    </WrapPanel>

                    <WrapPanel Margin="0,0,0,6">
                        <Button x:Name="BtnSave"
                                Content="Save JSON"
                                Width="90"
                                Margin="2"
                                Click="BtnSave_Click"/>
                        <Button x:Name="BtnLoad"
                                Content="Load JSON"
                                Width="100"
                                Margin="2"
                                Click="BtnLoad_Click"/>
                    </WrapPanel>

                    <Button x:Name="BtnSaveSvg"
                            Content="Save SVG"
                            Margin="2,0,2,4"
                            Click="BtnSaveSvg_Click"/>

                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- مساحة الرسم -->
        <Border Grid.Column="1"
                Background="#0B1020"
                Padding="8">
            <ScrollViewer x:Name="MainScrollViewer"
                          Background="#0B1020"
                          HorizontalScrollBarVisibility="Auto"
                          VerticalScrollBarVisibility="Auto">
                <Grid x:Name="ZoomContainer"
                      Background="Transparent">
                    <Canvas x:Name="MainCanvas"
                            Background="White"
                            ClipToBounds="True"
                            Width="800"
                            Height="600"
                            MouseLeftButtonDown="Canvas_MouseLeftButtonDown"
                            MouseMove="Canvas_MouseMove"
                            MouseLeftButtonUp="Canvas_MouseLeftButtonUp"/>
                </Grid>
            </ScrollViewer>
        </Border>

    </Grid>
</Window>
